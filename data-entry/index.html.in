<!DOCTYPE html>
<html ng-app="chaise.dataEntry">
<head>
    <title>Data Entry App</title>
    %ASSETS%
    <meta http-equiv="X-UA-Compatible" content="IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
    <!--
        IE8 support, see AngularJS Internet Explorer Compatibility http://docs.angularjs.org/guide/ie
        For Firefox 3.6, you will also need to include jQuery and ECMAScript 5 shim
    -->
    <!--[if lt IE 9]>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/es5-shim/2.2.0/es5-shim.js"></script>
        <script>
            document.createElement('ui-select');
            document.createElement('ui-select-match');
            document.createElement('ui-select-choices');
        </script>
    <![endif]-->
</head>
<body>
    <div class="container-fluid">
        <div ng-controller="FormController as form" class="row">
            <div class="col-md-12">
                <table class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th ng-repeat="column in form.editorModel.table.columns.all();">
                                {{column.name | underscoreToSpace | toTitleCase}} &bull; <small>{{column.type.name}}</small>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="(rowIndex, row) in form.editorModel.rows track by $index">
                            <td ng-repeat="column in form.editorModel.table.columns.all();" ng-switch="form.setInputType(column);">
                                <span ng-switch-when="autoGen" ng-model="form.editorModel.rows[rowIndex][column.name]">
                                    <code>{{form.editorModel.rows[rowIndex][column.name]}}</code>
                                </span>
                                <datepicker ng-switch-when="date" date-format="yyyy-MM-dd">
                                    <input ng-model="form.editorModel.rows[rowIndex][column.name]" type="text" class="form-control">
                                </datepicker>
                                <div ng-switch-when="dropdown">
                                    <ui-select ng-model="form.editorModel.rows[rowIndex][column.name]" theme="select2" ng-disabled="disabled">
                                        <ui-select-match placeholder="Select a value">{{$select.selected | underscoreToSpace | toTitleCase}}</ui-select-match>
                                        <ui-select-choices repeat="domainValue in form.editorModel.domainValues[column.name] | filter: $select.search" >
                                            <div ng-bind-html="domainValue | underscoreToSpace | toTitleCase | highlight: $select.search"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <input ng-switch-when="number" ng-model="form.editorModel.rows[rowIndex][column.name]" type="number" class="form-control">
                                <input ng-switch-default ng-model="form.editorModel.rows[rowIndex][column.name]" type="text" class="form-control">
                            </td>
                         </tr>
                     </tbody>
                 </table>
                 <button class="btn btn-default" type="button" ng-click="form.addFormRow();">Add Row</button>
                 <button class="btn btn-primary" type="button" ng-click="form.submit();">Submit</button>
            </div>
        </div>
    </div>
</body>
</html>
