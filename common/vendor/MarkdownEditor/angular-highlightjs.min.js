function attrGetter(n){return function(e){switch(e){case"escape":return angular.isDefined(n.hljsEscape)?n.hljsEscape:n.escape;case"no-escape":return angular.isDefined(n.hljsNoEscape)?n.hljsNoEscape:n.noEscape;case"onhighlight":return angular.isDefined(n.hljsOnhighlight)?n.hljsOnhighlight:n.onhighlight}}}function shouldHighlightStatics(n){var e=!0;return angular.forEach(["source","include"],function(t){n[t]&&(e=!1)}),e}var ngModule=angular.module("hljs",[]);ngModule.provider("hljsService",function(){var n={};return{setOptions:function(e){angular.extend(n,e)},getOptions:function(){return angular.copy(n)},$get:function(){return(hljs.configure||angular.noop)(n),hljs}}}),ngModule.factory("hljsCache",function(n){return n("hljsCache")}),ngModule.controller("HljsCtrl",function(n,e,t,r){function i(n,e){var t=e?"\\\\$&":"\\$&";return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,t)}function l(n){for(var e,t=[],r=new RegExp(p,"g"),i="",l=0;null!==(e=r.exec(n));)i+=n.substring(l,e.index)+d,l=e.index+e[0].length,t.push(e[0]);return i+=n.substr(l),{code:i,tokens:t}}function a(n,e){for(var t,r=new RegExp(d,"g"),i="",l=0;null!==(t=r.exec(n));)i+=n.substring(l,t.index)+e.shift(),l=t.index+t[0].length;return i+=n.substr(l)}var u=this,c=null,o=null,h=null,s=!1,g=null,f=null,p=i(t.startSymbol())+"((.|\\s)+?)"+i(t.endSymbol()),d="âˆ«";u.init=function(n){c=n},u.setInterpolateScope=function(n){s=n,h&&u.highlight(h)},u.setLanguage=function(n){o=n,h&&u.highlight(h)},u.highlightCallback=function(n){f=n},u._highlight=function(r){if(c){var i,p,d;if(h=r,s&&(r=(d=l(r)).code),o?(p=u._cacheKey(o,!!s,r),(i=n.get(p))||(i=e.highlight(o,e.fixMarkup(r),!0),n.put(p,i))):(p=u._cacheKey(!!s,r),(i=n.get(p))||(i=e.highlightAuto(e.fixMarkup(r)),n.put(p,i))),r=i.value,s){(g||angular.noop)(),d&&(r=a(r,d.tokens));var j=t(r);g=s.$watch(j,function(n,e){n!==e&&c.html(n)}),s.$apply(),c.html(j(s))}else c.html(r);c.addClass(i.language),null!==f&&angular.isFunction(f)&&f()}},u.highlight=function(n,e,t){var i;return function(){var l=this,a=arguments,u=function(){i=null,t||n.apply(l,a)},c=t&&!i;r.clearTimeout(i),i=r.setTimeout(u,e),c&&n.apply(l,a)}}(u._highlight,17),u.clear=function(){c&&(h=null,c.text(""))},u.release=function(){c=null,s=null,(g||angular.noop)(),g=null},u._cacheKey=function(){return Array.prototype.slice.call(arguments).join("!angular-highlightjs!")}});var hljsDir,interpolateDirFactory,languageDirFactory,sourceDirFactory,includeDirFactory;hljsDir=function(n){return{restrict:"EA",controller:"HljsCtrl",compile:function(e,t,r){var i=e[0].innerHTML.replace(/^(\r\n|\r|\n)/m,""),l=e[0].textContent.replace(/^(\r\n|\r|\n)/m,"");return e.html('<pre><code class="hljs"></code></pre>'),function(e,t,r,a){var u,c=attrGetter(r);if(angular.isDefined(c("escape"))?u=n(c("escape")):angular.isDefined(c("no-escape"))&&(u=n("false")),a.init(t.find("code")),c("onhighlight")&&a.highlightCallback(function(){e.$eval(c("onhighlight"))}),(i||l)&&shouldHighlightStatics(r)){var o;o=u&&!u(e)?l:i,a.highlight(o)}e.$on("$destroy",function(){a.release()})}}}},languageDirFactory=function(n){return function(){return{require:"?hljs",restrict:"A",link:function(e,t,r,i){i&&r.$observe(n,function(n){angular.isDefined(n)&&i.setLanguage(n)})}}}},interpolateDirFactory=function(n){return function(){return{require:"?hljs",restrict:"A",link:function(e,t,r,i){i&&e.$watch(r[n],function(n,t){(n||n!==t)&&i.setInterpolateScope(n?e:null)})}}}},sourceDirFactory=function(n){return function(){return{require:"?hljs",restrict:"A",link:function(e,t,r,i){i&&e.$watch(r[n],function(n,e){n?i.highlight(n):i.clear()})}}}},includeDirFactory=function(n){return function(e,t,r){return{require:"?hljs",restrict:"A",compile:function(i,l,a){var u=l[n];return function(n,i,l,a){var c=0;a&&n.$watch(u,function(n){var i=++c;if(n&&angular.isString(n)){var l,u;(l=t.get(n))||(u=r.defer(),e.get(n,{cache:t,transformResponse:function(n,e){return n}}).then(function(n){i===c&&u.resolve(n)}).catch(function(){i===c&&a.clear(),u.resolve()}),l=u.promise),r.when(l).then(function(n){n&&(angular.isArray(n)?n=n[1]:angular.isObject(n)&&(n=n.data),n=n.replace(/^(\r\n|\r|\n)/m,""),a.highlight(n))})}else a.clear()})}}}}},function(n){n.directive("hljs",hljsDir),angular.forEach(["interpolate","hljsInterpolate","compile","hljsCompile"],function(e){n.directive(e,interpolateDirFactory(e))}),angular.forEach(["language","hljsLanguage"],function(e){n.directive(e,languageDirFactory(e))}),angular.forEach(["source","hljsSource"],function(e){n.directive(e,sourceDirFactory(e))}),angular.forEach(["include","hljsInclude"],function(e){n.directive(e,includeDirFactory(e))})}(ngModule);
