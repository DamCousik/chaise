<div class="recordset-container without-faceting" >
    <loading-spinner ng-show="(!vm.initialized || $root.showSpinner) && !$root.error"></loading-spinner>
    <div class="top-panel-container" ng-show="vm.reference">
        <alerts alerts="$root.alerts"></alerts>
        <div class="top-flex-panel">
            <div class="top-right-panel">
                <div class="recordset-controls-container" ng-show="vm.initialized">
                    <div ng-if="vm.selectedRows.length > 0 && vm.config.selectMode == 'multi-select'" class="recordset-selected-rows recordset-chiclets-container">
                        <div class="filter-chiclet chaise-btn-group" ng-repeat="row in vm.selectedRows track by $index">
                            <button class="filter-chiclet-remove chaise-btn chaise-btn-secondary" ng-click="removePill(row.uniqueId, $event)">
                                <i class="glyphicon glyphicon-remove"></i>
                            </button>
                            <span class="chaise-btn chaise-btn-secondary" ng-if="row.displayname.value && row.displayname.isHTML" ng-bind-html="row.displayname.value"></span>
                            <span class="chaise-btn chaise-btn-secondary" ng-if="row.displayname.value && !row.displayname.isHTML" ng-bind="row.displayname.value"></span>
                            <span class="chaise-btn chaise-btn-secondary" ng-if="row.displayname.value == ''" ng-bind-html="defaultDisplayname.empty"></span>
                            <span class="chaise-btn chaise-btn-secondary" ng-if="row.displayname.value == null" ng-bind-html="defaultDisplayname.null"></span>
                        </div>
                        <button ng-click="removeAllPills($event)" class="chaise-btn chaise-btn-tertiary clear-all-btn" uib-tooltip="Clear all filters applied" tooltip-placement="bottom">
                            <span>Clear all selected rows</span>
                        </button>
                    </div>

                    <div class="row">
                        <div class="col-lg-4 col-md-5 col-sm-6 col-xs-6">
                            <!-- search box -->
                            <div class="input-group has-feedback">
                                <input type="text"
                                    id="search-input"
                                    ng-model="vm.search"
                                    class="form-control main-search-input"
                                    ng-class="{'search-progress': inputChangedPromise }"
                                    on-enter="enterPressed()"
                                    ng-change="inputChanged()"
                                    placeholder="Search"
                                    autofocus>
                                    <div class="form-control-feedback coltooltip" ng-show="vm.search && !inputChangedPromise" ng-style="{'cursor': 'pointer', 'right': (onPlusButtonClick ? '85px': '50px'), 'pointer-events': 'all', 'z-index': '5'}"><!-- form-control:focus changes the z-index of the form control from 2 to 3. form-control-feedback has z-index of 2. Overriding that z index to 5 so it isn't hidden when focused-->
                                        <span id="search-clear" class="glyphicon glyphicon-remove coltooltiptext search-remove" ng-click="::clearSearch()" tooltip-placement="bottom" uib-tooltip="Clear Search"></span>
                                    </div>
                                <span class="input-group-btn">
                                    <button id="search-submit" class="btn btn-primary btn-inverted" ng-click="enterPressed(vm.search)" role="button" tooltip-placement="bottom"
                                        uib-tooltip-html="'<p>Use space to separate between conjunctive terms, | (no spaces) to separate disjunctive terms and quotations for exact phrases.</p><p>For example, <i><b>usc 1234</b></i> returns all records containing &ldquo;usc&rdquo; and &ldquo;1234&rdquo;.</p><p><i><b>usc|1234</b></i> returns all records containing &ldquo;usc&rdquo; or &ldquo;1234&rdquo;.</b></i></p><p><i><b>&ldquo;usc 1234&rdquo;</b></i> returns all records containing &ldquo;usc 1234&rdquo;.</p>'">
                                        &nbsp;<span class="glyphicon glyphicon-search"></span>&nbsp;<!-- Added 2 non-breaking spaces to prevent btn's margins from collapsing and to center the icon-->
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <table-header ng-show="vm.initialized" vm="vm" toggle-match-not-null="toggleMatchNotNull" toggle-match-null="toggleMatchNull"></table-header>
            </div>
        </div>
    </div>
    <div class="bottom-panel-container">
        <div class="side-panel-resizable close-panel"></div>
        <div class="main-container">
            <loading-spinner id="main-spinner" ng-show="!vm.hasLoaded && vm.initialized"></loading-spinner>
            <div class="main-body">
                <!-- record table -->
                <div class="recordset-table-container" ng-show="vm.initialized">
                    <record-table-select-faceting  id="rs-{{vm.makeSafeIdAttr(vm.tableDisplayName.value)}}" vm="vm" on-selected-rows-changed-bind="onSelectedRowsChanged"></record-table>
                </div>
            </div>
            <footer ng-show="vm.initialized && vm.config.displayMode === recordsetDisplayModes.fullscreen"></footer>
        </div>
    </div>
</div>
