<!DOCTYPE html>
<html ng-app="chaise.record">
<head>
    <title>Record</title>
    <meta http-equiv="X-UA-Compatible" content="IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
    %ASSETS%
    <!--
        IE8 support, see AngularJS Internet Explorer Compatibility http://docs.angularjs.org/guide/ie
        For Firefox 3.6, you will also need to include jQuery and ECMAScript 5 shim
    -->
    <!--[if lt IE 9]>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/es5-shim/2.2.0/es5-shim.js"></script>
        <script>
            document.createElement('ui-select');
            document.createElement('ui-select-match');
            document.createElement('ui-select-choices');
        </script>
    <![endif]-->
</head>
<body>
    <navbar></navbar>

    <!-- Body of the docment-->
    <div class="body">
        <div id="entity-title">{{ reference.displayname }}</div>
        <div id="table-title">{{ context.tableName | uppercase }}</div>

        <!-- prevents initialization of the directive until the data is available -->
        <div ng-if="recordValues && columns">
            <record-display></record-display>
        </div>

        <!-- prevents initialization of the directive until the data is available | wait until all data values have been fetched -->
        <div ng-if="relatedReferences.length == dataArray.length">
            <uib-accordion close-others="false">
                <div uib-accordion-group heading="{{relatedRef.displayname}} ({{dataArray[$index].length}})" ng-repeat="relatedRef in relatedReferences track by $index">
                    <div class="related-ref-displayname"></div>
                    <record-table columns="relatedRef.columns" data="dataArray[$index]"></record-table>
                </div>
            </uib-accordion>
        </div>
    </div>
</body>
