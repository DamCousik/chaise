<!DOCTYPE html>
<html ng-app="chaise.record">
<head>
    <title>Record</title>
    <meta http-equiv="X-UA-Compatible" content="IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
    %ASSETS%
</head>
<body>
    <navbar></navbar>

    <!-- Body of the docment-->
    <div class="body">
        <div id="entity-title">{{ reference.displayname }}</div>
        <div id="table-title">{{ context.tableName | uppercase }}</div>

        <!-- prevents initialization of the directive until the data is available -->
        <div ng-if="recordValues && columns">
            <record-display></record-display>
        </div>

        <!-- prevents initialization of the directive until the data is available | wait until all data values have been fetched -->
        <div ng-if="relatedReferences.length == dataArray.length">
            <uib-accordion close-others="false">
                <div uib-accordion-group heading="{{relatedRef.displayname}} ({{dataArray[$index].length}})" ng-repeat="relatedRef in relatedReferences track by $index">
                    <record-table columns="relatedRef.columns" data="dataArray[$index]"></record-table>
                </div>
            </uib-accordion>
        </div>
    </div>
</body>
